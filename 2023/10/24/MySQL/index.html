<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":"ture","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="MySQL基础MySQL概述数据库相关概念   名称 全称 简称    数据库 存储数据的仓库,数据是有组织的进行存储 DataBase(DB)   数据库管理系统 操作和管理数据库的大型软件 DataBase Management System (DBMS)   SQL 操作关系型数据的编程语言,定义了一套操作关系数据库统一标准 Structured Query Language(SQL)">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://example.com/2023/10/24/MySQL/index.html">
<meta property="og:site_name" content="MyBlog">
<meta property="og:description" content="MySQL基础MySQL概述数据库相关概念   名称 全称 简称    数据库 存储数据的仓库,数据是有组织的进行存储 DataBase(DB)   数据库管理系统 操作和管理数据库的大型软件 DataBase Management System (DBMS)   SQL 操作关系型数据的编程语言,定义了一套操作关系数据库统一标准 Structured Query Language(SQL)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-24T15:06:19.000Z">
<meta property="article:modified_time" content="2023-11-08T07:10:31.915Z">
<meta property="article:author" content="小小怪将军">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2023/10/24/MySQL/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2023/10/24/MySQL/","path":"2023/10/24/MySQL/","title":"MySQL"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MySQL | MyBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="MyBlog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">MyBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人性的背后是白云苍狗,愿我们都做生活的高手</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">MySQL基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E6%A6%82%E8%BF%B0"><span class="nav-number">1.1.</span> <span class="nav-text">MySQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.1.</span> <span class="nav-text">数据库相关概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.1.2.</span> <span class="nav-text">数据模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93-RDBMS"><span class="nav-number">1.1.3.</span> <span class="nav-text">关系型数据库(RDBMS)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL"><span class="nav-number">1.2.</span> <span class="nav-text">SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="nav-number">1.2.1.</span> <span class="nav-text">SQL通用语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="nav-number">1.2.2.</span> <span class="nav-text">SQL分类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#DDL"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">DDL</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DML"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">DML</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DQL"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">DQL</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DCL"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">DCL</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">1.4.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.4.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E6%BC%94%E7%A4%BA"><span class="nav-number">1.4.2.</span> <span class="nav-text">约束演示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">1.4.3.</span> <span class="nav-text">外键约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.5.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="nav-number">1.5.0.1.</span> <span class="nav-text">多表关系</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="nav-number">1.5.0.2.</span> <span class="nav-text">多表查询概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.5.0.3.</span> <span class="nav-text">内连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.5.0.4.</span> <span class="nav-text">外连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E9%93%BE%E6%8E%A5"><span class="nav-number">1.5.0.5.</span> <span class="nav-text">自链接</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2-union-union-all"><span class="nav-number">1.5.0.5.1.</span> <span class="nav-text">联合查询(union,union all)</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%90%E9%93%BE%E6%8E%A5"><span class="nav-number">1.5.0.6.</span> <span class="nav-text">子链接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%A1%88%E4%BE%8B"><span class="nav-number">1.5.0.7.</span> <span class="nav-text">多表查询案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.6.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B"><span class="nav-number">1.6.1.</span> <span class="nav-text">事务简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">1.6.2.</span> <span class="nav-text">事务操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="nav-number">1.6.3.</span> <span class="nav-text">事务四大特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="nav-number">1.6.4.</span> <span class="nav-text">并发事务问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">1.6.5.</span> <span class="nav-text">事务隔离级别</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小小怪将军"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">小小怪将军</p>
  <div class="site-description" itemprop="description">JavaScript,CSS,HTML,VUE</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Tarry0520" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Tarry0520" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:3022984471@qq.com" title="E-Mail → mailto:3022984471@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/24/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小小怪将军">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
      <meta itemprop="description" content="JavaScript,CSS,HTML,VUE">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="MySQL | MyBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-10-24 23:06:19" itemprop="dateCreated datePublished" datetime="2023-10-24T23:06:19+08:00">2023-10-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 15:10:31" itemprop="dateModified" datetime="2023-11-08T15:10:31+08:00">2023-11-08</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>21k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>38 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="MySQL基础"><a href="#MySQL基础" class="headerlink" title="MySQL基础"></a>MySQL基础</h2><h3 id="MySQL概述"><a href="#MySQL概述" class="headerlink" title="MySQL概述"></a>MySQL概述</h3><h4 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h4><table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">全称</th>
<th align="center">简称</th>
</tr>
</thead>
<tbody><tr>
<td align="center">数据库</td>
<td align="center">存储数据的仓库,数据是有组织的进行存储</td>
<td align="center">DataBase(DB)</td>
</tr>
<tr>
<td align="center">数据库管理系统</td>
<td align="center">操作和管理数据库的大型软件</td>
<td align="center">DataBase Management System (DBMS)</td>
</tr>
<tr>
<td align="center">SQL</td>
<td align="center">操作关系型数据的编程语言,定义了一套操作关系数据库<strong>统一标准</strong></td>
<td align="center">Structured Query Language(SQL)</td>
</tr>
</tbody></table>
<ul>
<li><p>主流的关系型数据管理系统</p>
<ul>
<li>Oracle</li>
<li>MySQL</li>
<li>Microsoft SQL Server</li>
<li>PostgreSQL</li>
<li>IBM Db2</li>
<li>Microsoft Access</li>
<li>SQLite</li>
</ul>
</li>
<li><p>停止与启动(以管理员方式启动)</p>
<ul>
<li>启动: <code>net start mysql80</code></li>
<li>停止: <code>net stop mysql80</code></li>
</ul>
</li>
<li><p>客户端链接</p>
<ul>
<li>方式一: 启动MySQL命令工具(MySQL 8.0 Command Line Client)</li>
<li>方式二:系统自带的命令行工具执行命令: <code>mysql [-h  127.0.0.1] [-P 3306] -u root -p</code></li>
</ul>
</li>
<li><p>环境配置以及安装(<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_63112274/article/details/130517120"></a>)</p>
<h4 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h4><ul>
<li><p>客户端操作MySQL数据库服务器</p>
<ul>
<li><p>客户端向MySQL数据库服务器发送SQL语句</p>
</li>
<li><p>MySQL数据库服务器中有DBMS(数据库管理系统)</p>
<ul>
<li><p>DBMS回去操作我们的数据库(不止一个)</p>
</li>
<li><p>数据库再去维护多张表(数据库中存储的数据)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="关系型数据库-RDBMS"><a href="#关系型数据库-RDBMS" class="headerlink" title="关系型数据库(RDBMS)"></a>关系型数据库(RDBMS)</h4><blockquote>
<p>概念:建立在关系模型基础上,由多张相互连接的二位表组成的数据库</p>
<p>特点:</p>
<ol>
<li>使用表存储数据,格式统一,便于维护</li>
<li>使用SQL语言操作,标准统一,使用方便</li>
</ol>
</blockquote>
<h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><h4 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h4><ul>
<li>SQL通用语法<ol>
<li>SQL语句通常可以单行或多行书写,以分好结尾</li>
<li>SQL语句可以使用空格&#x2F;缩进来增强语句的可读性</li>
<li>MySQL数据库的SQL语句不区分大小写,关键字建议使用大写</li>
<li>注释:<ul>
<li>单行注释: <code>--</code>注释内容或<code>#</code>注释内容(MySQL等)</li>
<li>多行注释:<code> /*注释内容*/</code></li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h4><table>
<thead>
<tr>
<th align="center">分类</th>
<th align="center">全称</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DDL</td>
<td align="center">Data Definition Language</td>
<td align="center">数据定义语言,用来定义数据库对象(数据库,表,字段)</td>
</tr>
<tr>
<td align="center">DML</td>
<td align="center">Data Manipulation Language</td>
<td align="center">数据操作语言,用来对数据库表中的数据进行增删改</td>
</tr>
<tr>
<td align="center">DQL</td>
<td align="center">Data Query Language</td>
<td align="center">数据查询语言,用来查询数据库中表的记录</td>
</tr>
<tr>
<td align="center">DCL</td>
<td align="center">Data Control Language</td>
<td align="center">数据控制语言,用来创建数据库用户、控制数据库的访问权限</td>
</tr>
</tbody></table>
<h5 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h5><ul>
<li><p>DDL-数据库操作</p>
<ul>
<li><p>查询</p>
<ul>
<li><p>查询所有数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询当前数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集(utf8mb4)] [COLLATE 排序规则] ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE 数据库名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-查询</p>
<ul>
<li><p>查询当前数据库所有表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询表结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询指定表的建表语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE TABLE 表名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-创建</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE <span class="selector-tag">TABLE</span> 表名(</span><br><span class="line">	字段<span class="number">1</span> 字段<span class="number">1</span>类型 <span class="selector-attr">[COMMET 字段1注释]</span>,</span><br><span class="line">	字段<span class="number">2</span> 字段<span class="number">2</span>类型 <span class="selector-attr">[COMMET 字段2注释]</span>,</span><br><span class="line">	字段<span class="number">3</span> 字段<span class="number">3</span>类型 <span class="selector-attr">[COMMET 字段3注释]</span>,</span><br><span class="line">	......</span><br><span class="line">	字段n 字段n类型 <span class="selector-attr">[COMMET 字段n注释]</span></span><br><span class="line">)<span class="selector-attr">[COMMET 表注释]</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>DDL-表操作-数据类型</p>
<blockquote>
<p>MySQL中的数据类型有很多,主要分为三类:数值类型、字符串类型、日期时间类型</p>
</blockquote>
<ul>
<li><p>数值类型</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th>大小</th>
<th align="center">有符号(SIGNED)范围</th>
<th align="center">无符号(UNSIGNED)范围</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">TINYINT</td>
<td>1byte</td>
<td align="center">(128,127)</td>
<td align="center">(0,255)</td>
<td align="center">小整数值</td>
</tr>
<tr>
<td align="center">SMALLINT</td>
<td>2byte</td>
<td align="center">(-32768,32767)</td>
<td align="center">(0,65535)</td>
<td align="center">大整数值</td>
</tr>
<tr>
<td align="center">MEDIUMINT</td>
<td>3byte</td>
<td align="center">(-8388608,8388607)</td>
<td align="center">(0,16777215)</td>
<td align="center">大整数值</td>
</tr>
<tr>
<td align="center">INT或INTEGER</td>
<td>4byte</td>
<td align="center">(-2147483648,2147483647)</td>
<td align="center">(0,4294967295)</td>
<td align="center">大整数值</td>
</tr>
<tr>
<td align="center">BIGINT</td>
<td>8byte</td>
<td align="center">(-2^63,2^63-1)</td>
<td align="center">(0,2^64-1)</td>
<td align="center">极大整数值</td>
</tr>
<tr>
<td align="center">FLOAT</td>
<td>4byte</td>
<td align="center">(-3.402823466  E+38,3.402823466351 E+38)</td>
<td align="center">0和(1.175494351 E-38 ,3.402823466 E+38)</td>
<td align="center">单精度浮点数值</td>
</tr>
<tr>
<td align="center">DOUBLE</td>
<td>8byte</td>
<td align="center">(-1.7976931348623157 E+308,1.7976931348623157 E+308)</td>
<td align="center">0和(2.2250738585072014 E-308,1.7976931348623157 E+308)</td>
<td align="center">双精度浮点值</td>
</tr>
<tr>
<td align="center">DECTMAL</td>
<td></td>
<td align="center">依赖于M(精度)和D(标度)的值</td>
<td align="center">依赖于M(精度)和D(标度)的值</td>
<td align="center">小数值(精确定点数)</td>
</tr>
</tbody></table>
</li>
<li><p>字符串类型</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th>大小</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CHAR</td>
<td>0-255 bytes</td>
<td align="center">定长字符串</td>
</tr>
<tr>
<td align="center">VARCHAR</td>
<td>0-65535 bytes</td>
<td align="center">变长字符串</td>
</tr>
<tr>
<td align="center">TINYBLOB</td>
<td>0-255 bytes</td>
<td align="center">不超过255个字符的二进制数据</td>
</tr>
<tr>
<td align="center">TINYTEXT</td>
<td>0-255 bytes</td>
<td align="center">短文本字符串</td>
</tr>
<tr>
<td align="center">BLOB</td>
<td>0-65 535 bytes</td>
<td align="center">二进制形式的长文本数据</td>
</tr>
<tr>
<td align="center">TEXT</td>
<td>0-65 535 bytes</td>
<td align="center">长文本数据</td>
</tr>
<tr>
<td align="center">MEDIUMBLOB</td>
<td>0-16 777 215 bytes</td>
<td align="center">二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td align="center">MEDIUMTEXT</td>
<td>0-16 777 215 bytes</td>
<td align="center">中等长度文本数据</td>
</tr>
<tr>
<td align="center">LONGBLOB</td>
<td>0-4 294 967 295 bytes</td>
<td align="center">二进制形式的极大文本数据</td>
</tr>
<tr>
<td align="center">LONGTEXT</td>
<td>0-4 294 967 295 bytes</td>
<td align="center">极大文本数据</td>
</tr>
</tbody></table>
</li>
<li><p>日期类型</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th>大小</th>
<th align="center">范围</th>
<th align="center">格式</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DATE</td>
<td>3</td>
<td align="center">1000-01-01 至 9999-12-31</td>
<td align="center">YYYY-MM-DD</td>
<td align="center">日期值</td>
</tr>
<tr>
<td align="center">HHHHTIME</td>
<td>3</td>
<td align="center">-838:59:59</td>
<td align="center">HH-MM-SS</td>
<td align="center">时间值或持续时间</td>
</tr>
<tr>
<td align="center">YEAR</td>
<td>1</td>
<td align="center">1901至2155</td>
<td align="center">YYYY</td>
<td align="center">年份值</td>
</tr>
<tr>
<td align="center">DATETIME</td>
<td>8</td>
<td align="center">1000-01-01 00:00:00 至 9999-12-31 23:59:59</td>
<td align="center">YYYY-MM-DD HH:MM:SS</td>
<td align="center">混合日期和时间</td>
</tr>
<tr>
<td align="center">TIMESTAMP</td>
<td>4</td>
<td align="center">1970-01-01 00:00:01 至 2038-1-19 03:14:07</td>
<td align="center">YYYY-MM-DD HH:MM:SS</td>
<td align="center">混合日期和时间值,时间戳</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>DDL-表操作-修改</p>
<ul>
<li><p>添加字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改数据类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改字段名和字段类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP 字段名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 RENAME TO 新表名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-删除</p>
<ul>
<li><p>删除表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE [IF EXISTS] 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除指定表,并重新创建该表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE 表名;</span><br><span class="line"></span><br><span class="line">注意:在删除表时,表中的全部数据也会被删除</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h5><ul>
<li><p>添加数据(INSERT)</p>
<ul>
<li><p>给指定字段添加数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 (字段1,字段2,...) VALUES(值1,值2,...);</span><br></pre></td></tr></table></figure>
</li>
<li><p>给全部字段添加数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 VALUES(值1,值2,...);</span><br></pre></td></tr></table></figure>
</li>
<li><p>批量添加数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 (字段1,字段2,...) VALUES(值1,值2,...),(值1,值2,...),(值1,值2,...);</span><br><span class="line"></span><br><span class="line">INSERT INTO 表名 VALUES(值1,值2,...),(值1,值2,...),(值1,值2,...);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>修改数据(UPDATE)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表名 SET 字段名1=值1,字段名2 =值2 ,...[WHERE 条件];</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除数据(DELETE)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM 表名 [where 条件]</span><br><span class="line"></span><br><span class="line">不能删除某个字段的数据(请使用update 值为null)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h5><ul>
<li><p>DQL-执行顺序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表</span><br><span class="line">FROM 表名</span><br><span class="line">WhERE 条件列表</span><br><span class="line">GROUP BY 分组字段列表</span><br><span class="line">HAVING 分组后条件列表</span><br><span class="line">ORDER BY 排序字段列表</span><br><span class="line">LIMIT 分页参数 </span><br></pre></td></tr></table></figure>
</li>
<li><p>DQL-基本查询</p>
<ul>
<li><p>查询多个字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段1,字段2,字段3... FROM 表名;</span><br><span class="line">SELECT * FROM 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置别名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段1 [AS 别名1],字段2 [AS 别名2] ... FROM 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>去除重复记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 字段列表 FROM 表名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DQL-条件查询</p>
<ul>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 WHERE 条件列表;</span><br></pre></td></tr></table></figure>
</li>
<li><p>条件</p>
<table>
<thead>
<tr>
<th align="center">比较运算符</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&gt;</td>
<td align="center">大于</td>
</tr>
<tr>
<td align="center">&gt;&#x3D;</td>
<td align="center">大于等于</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">小于</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;</td>
<td align="center">小于等于</td>
</tr>
<tr>
<td align="center">&#x3D;</td>
<td align="center">等于</td>
</tr>
<tr>
<td align="center">&lt;&gt; 或 !&#x3D;</td>
<td align="center">不等于</td>
</tr>
<tr>
<td align="center">BETWEEN … AND …</td>
<td align="center">在某个范围之内(含最小\最大值)</td>
</tr>
<tr>
<td align="center">IN(…)</td>
<td align="center">在in之后的列表中的值,多选一</td>
</tr>
<tr>
<td align="center">LIKE 占位符(_)</td>
<td align="center">模糊匹配(匹配单个字符,%匹配任意个字符)</td>
</tr>
<tr>
<td align="center">IS NULL</td>
<td align="center">是NULL</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">逻辑运算符</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AND 或 &amp;&amp;</td>
<td>并且(多个条件同时成立)</td>
</tr>
<tr>
<td align="center">OR 或 ||</td>
<td>或者(多个条件任意一个成立)</td>
</tr>
<tr>
<td align="center">NOT 或 !</td>
<td>非,不是</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>DQL-聚合函数</p>
<ol>
<li><p>讲一列数据作为一个整体进行纵向计算</p>
</li>
<li><p>常见的聚合函数</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">count</td>
<td align="center">统计数量</td>
</tr>
<tr>
<td align="center">max</td>
<td align="center">最大值</td>
</tr>
<tr>
<td align="center">min</td>
<td align="center">最小值</td>
</tr>
<tr>
<td align="center">avg</td>
<td align="center">平均值</td>
</tr>
<tr>
<td align="center">sum</td>
<td align="center">求和</td>
</tr>
</tbody></table>
</li>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 聚合函数(字段列表) FROM 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意:null值不参与所有聚合函数运算</p>
</li>
</ol>
</li>
<li><p>DQL-分组查询</p>
<ol>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段名 [HAVING 分组后过滤条件];</span><br></pre></td></tr></table></figure>
</li>
<li><p>where 与 having 区别</p>
<ul>
<li>执行时机不同:where是分组之前进行过滤,不满足where条件,不参与分组;而having是分组之后对结果进行过滤</li>
<li>判断条件不同:where不能对聚合函数进行判断,而having可以</li>
</ul>
</li>
<li><p>注意:</p>
<ul>
<li>执行顺序:where &gt;聚合函数&gt;having</li>
<li>分组之后,查询的字段一般为聚合函数和分组字段,查询其他字段无任何意义</li>
</ul>
</li>
</ol>
</li>
<li><p>DQL-排序查询</p>
<ol>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1,字段2 排序方式2;</span><br></pre></td></tr></table></figure>
</li>
<li><p>排序方式</p>
<ul>
<li>ASC:升序(默认)</li>
<li>DESC:降序</li>
</ul>
</li>
<li><p>注意:如果是多字段排序,当第一个字段值相同时,才会根据第二个字段进行排序</p>
</li>
</ol>
</li>
<li><p>DQL-分页查询</p>
<ol>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 LIMIT 起始索引,查询记录数;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意:</p>
<ul>
<li>起始索引从0开始&#x3D;(查询页码-1)*每页显示记录数</li>
<li>分页查询是数据库的方言,不同的数据库有不同的实现,MySQL中是LIMIT</li>
<li>如果查询的是第一页数据,起始索引可以省略,直接简写为limit 10</li>
</ul>
</li>
</ol>
</li>
<li><p>DQL-执行顺序</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM 表名列表</span><br><span class="line">WHERE 条件列表</span><br><span class="line">GROUP BY 分组子段列表</span><br><span class="line">HAVING 分组后条件列表</span><br><span class="line">SELECT 字段列表</span><br><span class="line">ORDER BY 排序字段列表</span><br><span class="line">LIMIT 分页参数</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h5><ul>
<li><p>DCL-管理用户</p>
<ol>
<li><p>查询用户</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建用户</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名(%任意主机,localhost本机)&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改用户密码</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;新密码&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除用户</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意</p>
<ul>
<li>主机名可以使用%通配</li>
<li>这类SQL开发人员操作较少,主要是DBA(Database Administrator s数据库管理员)使用</li>
</ul>
</li>
</ol>
</li>
<li><p>DCL-权限控制</p>
<table>
<thead>
<tr>
<th align="center">权限(常用)</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ALL,ALL PRIVILEGES</td>
<td align="center">所有权限</td>
</tr>
<tr>
<td align="center">SELECT</td>
<td align="center">查询数据</td>
</tr>
<tr>
<td align="center">INSERT</td>
<td align="center">插入数据</td>
</tr>
<tr>
<td align="center">UPDATE</td>
<td align="center">修改数据</td>
</tr>
<tr>
<td align="center">DELETE</td>
<td align="center">删除数据</td>
</tr>
<tr>
<td align="center">ALTER</td>
<td align="center">修改表</td>
</tr>
<tr>
<td align="center">DROP</td>
<td align="center">删除数据库&#x2F;表&#x2F;视图</td>
</tr>
<tr>
<td align="center">CREATE</td>
<td align="center">创建数据库&#x2F;表</td>
</tr>
</tbody></table>
<ol>
<li><p>查询权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>授予权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT 权限列表 ON 数据库名.表名 TO &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>撤销权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE 权限列表 ON 数据库名.表名 FROM &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意:</p>
<ul>
<li>多个权限之间,使用逗号分隔</li>
<li>授权时,数据库名和表名可以使用*进行通配,代表所有</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><blockquote>
<p>函数是指一段可以直接被另一段程序调用的程序和代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 函数(参数);</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>字符串函数</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CONCAT(S1,S2,…,Sn)</td>
<td align="center">字符串拼接,将S1,S2,…,Sn拼接成一个字符串</td>
</tr>
<tr>
<td align="center">LOWER(str)</td>
<td align="center">将字符串str全部转为小写</td>
</tr>
<tr>
<td align="center">UPPER(str)</td>
<td align="center">将字符串str全部转为大写</td>
</tr>
<tr>
<td align="center">LPAD(str,n,pad)</td>
<td align="center">左填充,用字符串pad对str的左边进行填充,达到n个字符串长度</td>
</tr>
<tr>
<td align="center">RPAD(str,n,pad)</td>
<td align="center">右填充,用字符串pad对str的右边进行填充,达到n个字符串长度</td>
</tr>
<tr>
<td align="center">TRIM(str)</td>
<td align="center">去掉字符串头部和尾部的空格</td>
</tr>
<tr>
<td align="center">SUBSTRING(str,start,len)</td>
<td align="center">返回字符串str从start位置起的len个长度的字符串</td>
</tr>
</tbody></table>
</li>
<li><p>数值函数</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CEIL(x)</td>
<td align="center">向上去整</td>
</tr>
<tr>
<td align="center">FLOOR(x)</td>
<td align="center">向下取整</td>
</tr>
<tr>
<td align="center">MOD(x,y)</td>
<td align="center">返回x&#x2F;y的模</td>
</tr>
<tr>
<td align="center">RAND()</td>
<td align="center">返回0~1内的随机数</td>
</tr>
<tr>
<td align="center">ROUND(x,y)</td>
<td align="center">求参数x的四舍五入的值,保留y位小数</td>
</tr>
</tbody></table>
</li>
<li><p>日期函数</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CURDATE()</td>
<td align="center">返回当前日期</td>
</tr>
<tr>
<td align="center">CURTIME()</td>
<td align="center">返回当前时间</td>
</tr>
<tr>
<td align="center">NOW</td>
<td align="center">返回当前日期和时间</td>
</tr>
<tr>
<td align="center">YEAR(date)</td>
<td align="center">获取指定date的年份</td>
</tr>
<tr>
<td align="center">MONTH(date)</td>
<td align="center">获取date的月份</td>
</tr>
<tr>
<td align="center">DAY(date)</td>
<td align="center">获取指定date的日期</td>
</tr>
<tr>
<td align="center">DATE_ADD(date,INTERVAL expr type)</td>
<td align="center">返回一个日期&#x2F;时间值加上一个时间间隔expr后的时间值</td>
</tr>
<tr>
<td align="center">DATEDIFF(date1,date2)</td>
<td align="center">返回起始时间date1和结束时间date2之间的天数</td>
</tr>
</tbody></table>
</li>
<li><p>流程控制函数</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">IF(value,t,f)</td>
<td align="center">如果value为true,则返回t,否则返回f</td>
</tr>
<tr>
<td align="center">IFNULL(value1,value2)</td>
<td align="center">如果value1不为空,则返回value1,否则返回value2</td>
</tr>
<tr>
<td align="center">CASE WHEN [val1] THEN [res1] … ELSE [default] END</td>
<td align="center">如果val1为true,返回res1,…否则返回default默认值</td>
</tr>
<tr>
<td align="center">CASE [expr] WHEN [val1] THEN [res1] … ELSE [default] END</td>
<td align="center">如果expr的值等于val1,返回res1, … 否则返回default默认值</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><ol>
<li><p>概念:约束是作用于表中字段上的规则,用于存储在表中的数据</p>
</li>
<li><p>目的:保证数据库中的数据的正确、有效性和完整性</p>
</li>
<li><p>分类:</p>
<table>
<thead>
<tr>
<th>约束</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>限制该字段的数据不能为null</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证该字段的所有数据都是唯一、不重复的</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识,要求非空且唯一</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时,如果未指定该字段的值,则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>检查约束(8.0.16版本之后)</td>
<td>保证字段值满足某一个条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>外键约束</td>
<td>用来让两张表的数据之间建立连接,保证数据的一致性和完整性</td>
<td>ROREGIN KEY</td>
</tr>
</tbody></table>
<p>注意:约束是作用于表中字段上的,可以在创建表&#x2F;修改表的时候添加约束</p>
</li>
</ol>
<h4 id="约束演示"><a href="#约束演示" class="headerlink" title="约束演示"></a>约束演示</h4><p>案例</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段含义</th>
<th>字段类型</th>
<th>约束条件</th>
<th>约束关键字</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>ID唯一标识</td>
<td>int</td>
<td>主键,并且自动增长</td>
<td>PRIMARY,AUTO_INCREMENT</td>
</tr>
<tr>
<td>name</td>
<td>姓名</td>
<td>varchar(10)</td>
<td>不为空,并且唯一</td>
<td>NOT NULL,UNIQUE</td>
</tr>
<tr>
<td>age</td>
<td>年龄</td>
<td>int</td>
<td>大于0,并且小于等于120</td>
<td>CHECK</td>
</tr>
<tr>
<td>status</td>
<td>状态</td>
<td>char(1)</td>
<td>如果没有指定该值,默认为1</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>gender</td>
<td>性别</td>
<td>char(1)</td>
<td>无</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#创建表</span><br><span class="line">create table user&#123;</span><br><span class="line">id int primary key auto_increment comment &#x27;主键&#x27;,</span><br><span class="line">name varchar(10) not null unique comment &#x27;姓名&#x27;,</span><br><span class="line">age int check(age&gt;0 &amp;&amp; age&lt;=120) comment &#x27;年龄&#x27;,</span><br><span class="line">status char(1) default &#x27;1&#x27; comment &#x27;状态&#x27;,</span><br><span class="line">gender char(1) comment &#x27;性别&#x27;</span><br><span class="line">&#125;comment &#x27;用户表&#x27;;</span><br><span class="line"></span><br><span class="line">#插入数据,id为主键且自增</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom&#x27;,19,&#x27;1&#x27;,&#x27;男&#x27;),(&#x27;Tom2&#x27;,25,&#x27;0&#x27;,&#x27;男&#x27;);</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom3&#x27;,19,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#name字段不能为null,违反非空约束</span><br><span class="line">insert into user(name,age,status,gender) value (null,19,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line">#已经存在Tom3,违反唯一约束</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom3&#x27;,19,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line">#值无效,检查约束</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom4&#x27;,80,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom5&#x27;,-1,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line">insert into user(name,age,status,gender) value (&#x27;Tom6&#x27;,124,&#x27;1&#x27;,&#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line">#默认值</span><br><span class="line">insert into user(name,age,gender) value (&#x27;Tom4&#x27;,80,&#x27;男&#x27;);</span><br></pre></td></tr></table></figure>



<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><blockquote>
<p>外键用来让两张表的数据之间建立连接,从而保存数据的一致性和完整性</p>
</blockquote>
<ul>
<li><p>语法</p>
<ul>
<li><p>添加外键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE 表名&#123;</span><br><span class="line">	字段名 数据类型,</span><br><span class="line">	...</span><br><span class="line">	[CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表 (主表列名)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名);</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除外键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP  FOREIGN KEY 外键名称 ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>删除&#x2F;更行行为</p>
<table>
<thead>
<tr>
<th>行为</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>NO ACTION</td>
<td>当在父表中删除&#x2F;更新对应记录时,首先检查该记录是否有对应外键,如果有则不允许删除&#x2F;更新。(与RESTRICT一致)</td>
</tr>
<tr>
<td>RESTRICT</td>
<td>当在父表中删除&#x2F;更新对应记录时,首先检查该记录是否有对应外键,如果有则不允许删除&#x2F;更新。(与 NO ACTION 一致)</td>
</tr>
<tr>
<td>CASCADE</td>
<td>当在父表中删除&#x2F;更新对应记录时,首先检查该记录是否有对应外键,如果有,则也删除&#x2F;更新外键在子表中的记录</td>
</tr>
<tr>
<td>SET NULL</td>
<td>当在父表中删除对应记录时,首先检查该记录是否有对应外键,如果有则设置子表中该外键值为null(这里要求该外键允许去null)</td>
</tr>
<tr>
<td>SET DEFAULT</td>
<td>父表有变更时,子表将外键列设置成一个默认的值(Innodb不支持)</td>
</tr>
</tbody></table>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN KEY</span>(外键字段名) <span class="keyword">REFERENCES</span> 主表( 主表列名) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><h5 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h5><ul>
<li><p>概述</p>
<blockquote>
<p>项目开发中,在进行数据库结构设计时,会根据业务需求及业务模块之间的关系,分析并设计表结构,由于业务之间相互关联,所以各个表之间也存在着各种联系,基本上分为三种</p>
</blockquote>
<ul>
<li><p>一对多(多对一)</p>
<ul>
<li>案例:部门 与 员工的关系</li>
<li>关系: 一个部门对应多个员工,一个员工对应对一个部门</li>
<li>实现:在多的一方建立外键,指向一的一方的主键</li>
</ul>
</li>
<li><p>多对多</p>
<ul>
<li><p>案例:学生与课程的关系</p>
</li>
<li><p>关系:一个学生可以选修多门课程,一门课程也可以供多个学生选择</p>
</li>
<li><p>实现:建立第三张中间表,中间表至少包含两个外键,分别关联两方主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">create table student&#123;</span><br><span class="line">	id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">	name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">	no varchar(10) comment &#x27;学号&#x27;</span><br><span class="line">&#125; comment &#x27;学生表&#x27;;</span><br><span class="line">insert into student values (null,&#x27;黛绮丝&#x27;,&#x27;20001001001&#x27;),(null,&#x27;谢逊&#x27;,&#x27;20001001002&#x27;),(null,&#x27;殷天正&#x27;,&#x27;20001001003&#x27;),(null,&#x27;韦一笑&#x27;,&#x27;20001001004&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table course&#123;</span><br><span class="line">	id into auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">    name varchar(10) comment &#x27;课程名称&#x27;</span><br><span class="line">&#125;comment &#x27;课程表&#x27;;</span><br><span class="line">insert into course values (null,&#x27;Java&#x27;),(null,&#x27;PHP&#x27;),(null,&#x27;MySql&#x27;),(null,&#x27;Hadoop&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table student_course&#123;</span><br><span class="line">	id into auto_increment comment &#x27;主键&#x27; primary key,</span><br><span class="line">	studentid int not null comment &#x27;学生ID&#x27;,</span><br><span class="line">	courseid int not null comment &#x27;课程ID&#x27;,</span><br><span class="line">	constraint fk_courseid foreign (courseid) references course(id),</span><br><span class="line">	constraint fk_studentid foregin (studentid) references student(id)</span><br><span class="line">&#125;comment &#x27;学生中间表&#x27;;</span><br><span class="line">insert into student_course values (null,1,1),(null,1,2),(null,1,3),(null,2,2),(null,2,3),(null,3,4);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>一对一</p>
<ul>
<li><p>案例:用户与用户详情的关系</p>
</li>
<li><p>关系:一对一关系,多用于单表拆分,将一张表的基础字段放在一张表中,其他详情字段放在另一张表中,以提升操作效率</p>
</li>
<li><p>实现:在任意一方加入外键,关联另外一方的主键,并且设置外键为唯一的(UNIQUE)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table tb_user&#123;</span><br><span class="line">	id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">    name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">    age int comment &#x27;年龄&#x27;,</span><br><span class="line">    gender char(1) comment &#x27;1:男 , 2:女&#x27;,</span><br><span class="line">    phone char(11) comment &#x27;手机号&#x27;,</span><br><span class="line">&#125;comment &#x27;用户基本信息表&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table tb_edu&#123;</span><br><span class="line">	id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">    degree varchar(20) comment &#x27;学历&#x27;,</span><br><span class="line">    major varchar(50) comment &#x27;专业&#x27;,</span><br><span class="line">    primaryschool varchar(50) comment &#x27;小学&#x27;,</span><br><span class="line">    middleschool varchar(50) comment &#x27;中学&#x27;,</span><br><span class="line">    university varchar(50) comment &#x27;大学&#x27;,</span><br><span class="line">    userid int unique comment &#x27;用户ID&#x27;,</span><br><span class="line">    constraint fk_userid foregin key (userid) references tb_user(id)</span><br><span class="line">&#125;comment &#x27;用户教育信息表&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="多表查询概述"><a href="#多表查询概述" class="headerlink" title="多表查询概述"></a>多表查询概述</h5><ul>
<li><p>概述:</p>
<blockquote>
<p>指从多张表中查询数据</p>
</blockquote>
</li>
<li><p>笛卡尔积:笛卡尔乘积是指在数学中,两个集合A和集合B的所有组合情况(多表查询时,需要消除无效的笛卡尔积)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">消除笛卡尔积</span><br><span class="line">select * from emp,dept where emp.dept_id=dept.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>多表查询分类</p>
<ul>
<li>连接查询<ul>
<li>内链接:相当于查询A \B交集部分数据</li>
<li>外链接:<ul>
<li>左外连接:查询左表所有数据,以及两张表交集部分数据</li>
<li>右外连接:查询右表所有数据,以及两张表交集部分数据</li>
</ul>
</li>
<li>自连接:当前表与自身的链接查询,自连接必须使用表别名</li>
</ul>
</li>
<li>子查询</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">    id   <span class="type">int</span> auto_increment comment <span class="string">&#x27;ID&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;部门名称&#x27;</span></span><br><span class="line">)comment <span class="string">&#x27;部门表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">    id  <span class="type">int</span> auto_increment comment <span class="string">&#x27;ID&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    age  <span class="type">int</span> comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    job <span class="type">varchar</span>(<span class="number">20</span>) comment <span class="string">&#x27;职位&#x27;</span>,</span><br><span class="line">    salary <span class="type">int</span> comment <span class="string">&#x27;薪资&#x27;</span>,</span><br><span class="line">    entrydate <span class="type">date</span> comment <span class="string">&#x27;入职时间&#x27;</span>,</span><br><span class="line">    managerid <span class="type">int</span> comment <span class="string">&#x27;直属领导ID&#x27;</span>,</span><br><span class="line">    dept_id <span class="type">int</span> comment <span class="string">&#x27;部门ID&#x27;</span></span><br><span class="line">)comment <span class="string">&#x27;员工表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> fk_emp_dept_id <span class="keyword">foreign</span> key (dept_id) <span class="keyword">references</span> dept(id);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept (id, name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;研发部&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;市场部&#x27;</span>),(<span class="number">3</span>, <span class="string">&#x27;财务部&#x27;</span>), (<span class="number">4</span>, <span class="string">&#x27;销售部&#x27;</span>), (<span class="number">5</span>, <span class="string">&#x27;总经办&#x27;</span>), (<span class="number">6</span>, <span class="string">&#x27;人事部&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (id, name, age, job,salary, entrydate, managerid, dept_id) <span class="keyword">VALUES</span></span><br><span class="line">            (<span class="number">1</span>, <span class="string">&#x27;金庸&#x27;</span>, <span class="number">66</span>, <span class="string">&#x27;总裁&#x27;</span>,<span class="number">20000</span>, <span class="string">&#x27;2000-01-01&#x27;</span>, <span class="keyword">null</span>,<span class="number">5</span>),</span><br><span class="line"></span><br><span class="line">            (<span class="number">2</span>, <span class="string">&#x27;张无忌&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;项目经理&#x27;</span>,<span class="number">12500</span>, <span class="string">&#x27;2005-12-05&#x27;</span>, <span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">            (<span class="number">3</span>, <span class="string">&#x27;杨逍&#x27;</span>, <span class="number">33</span>, <span class="string">&#x27;开发&#x27;</span>, <span class="number">8400</span>,<span class="string">&#x27;2000-11-03&#x27;</span>, <span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">            (<span class="number">4</span>, <span class="string">&#x27;韦一笑&#x27;</span>, <span class="number">48</span>, <span class="string">&#x27;开发&#x27;</span>,<span class="number">11000</span>, <span class="string">&#x27;2002-02-05&#x27;</span>, <span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">            (<span class="number">5</span>, <span class="string">&#x27;常遇春&#x27;</span>, <span class="number">43</span>, <span class="string">&#x27;开发&#x27;</span>,<span class="number">10500</span>, <span class="string">&#x27;2004-09-07&#x27;</span>, <span class="number">3</span>,<span class="number">1</span>),</span><br><span class="line">            (<span class="number">6</span>, <span class="string">&#x27;小昭&#x27;</span>, <span class="number">19</span>, <span class="string">&#x27;程序员鼓励师&#x27;</span>,<span class="number">6600</span>, <span class="string">&#x27;2004-10-12&#x27;</span>, <span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line"></span><br><span class="line">            (<span class="number">7</span>, <span class="string">&#x27;灭绝&#x27;</span>, <span class="number">60</span>, <span class="string">&#x27;财务总监&#x27;</span>,<span class="number">8500</span>, <span class="string">&#x27;2002-09-12&#x27;</span>, <span class="number">1</span>,<span class="number">3</span>),</span><br><span class="line">            (<span class="number">8</span>, <span class="string">&#x27;周芷若&#x27;</span>, <span class="number">19</span>, <span class="string">&#x27;会计&#x27;</span>,<span class="number">48000</span>, <span class="string">&#x27;2006-06-02&#x27;</span>, <span class="number">7</span>,<span class="number">3</span>),</span><br><span class="line">            (<span class="number">9</span>, <span class="string">&#x27;丁敏君&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;出纳&#x27;</span>,<span class="number">5250</span>, <span class="string">&#x27;2009-05-13&#x27;</span>, <span class="number">7</span>,<span class="number">3</span>),</span><br><span class="line"></span><br><span class="line">            (<span class="number">10</span>, <span class="string">&#x27;赵敏&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;市场部总监&#x27;</span>,<span class="number">12500</span>, <span class="string">&#x27;2004-10-12&#x27;</span>, <span class="number">1</span>,<span class="number">2</span>),</span><br><span class="line">            (<span class="number">11</span>, <span class="string">&#x27;鹿杖客&#x27;</span>, <span class="number">56</span>, <span class="string">&#x27;职员&#x27;</span>,<span class="number">3750</span>, <span class="string">&#x27;2006-10-03&#x27;</span>, <span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">            (<span class="number">12</span>, <span class="string">&#x27;鹤笔翁&#x27;</span>, <span class="number">19</span>, <span class="string">&#x27;职员&#x27;</span>,<span class="number">3750</span>, <span class="string">&#x27;2007-05-09&#x27;</span>, <span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">            (<span class="number">13</span>, <span class="string">&#x27;方东白&#x27;</span>, <span class="number">19</span>, <span class="string">&#x27;职员&#x27;</span>,<span class="number">5500</span>, <span class="string">&#x27;2009-02-12&#x27;</span>, <span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line"></span><br><span class="line">            (<span class="number">14</span>, <span class="string">&#x27;张三丰&#x27;</span>, <span class="number">88</span>, <span class="string">&#x27;销售总监&#x27;</span>,<span class="number">14000</span>, <span class="string">&#x27;2004-10-12&#x27;</span>, <span class="number">1</span>,<span class="number">4</span>),</span><br><span class="line">            (<span class="number">15</span>, <span class="string">&#x27;俞莲舟&#x27;</span>, <span class="number">38</span>, <span class="string">&#x27;销售&#x27;</span>,<span class="number">4600</span>, <span class="string">&#x27;2004-10-12&#x27;</span>, <span class="number">14</span>,<span class="number">4</span>),</span><br><span class="line">            (<span class="number">16</span>, <span class="string">&#x27;宋远桥&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;销售&#x27;</span>,<span class="number">4600</span>, <span class="string">&#x27;2004-10-12&#x27;</span>, <span class="number">14</span>,<span class="number">4</span>),</span><br><span class="line">            (<span class="number">17</span>, <span class="string">&#x27;陈友谅&#x27;</span>, <span class="number">42</span>, <span class="keyword">null</span>,<span class="number">2000</span>, <span class="string">&#x27;2011-10-12&#x27;</span>, <span class="number">1</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>



<h5 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h5><p>内连接查询语法:</p>
<ul>
<li><p>隐式内连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表1,表2 WHERE 条件...;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显式内连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 连接条件 ...; </span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h5><p>外连接查询语法:</p>
<ul>
<li><p>左外连接:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件 ...;</span><br></pre></td></tr></table></figure>
</li>
<li><p>右外连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件 ...;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="自链接"><a href="#自链接" class="headerlink" title="自链接"></a>自链接</h5><p>自连接查询语法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名A ON 条件...;</span><br></pre></td></tr></table></figure>

<p><code>自连接查询,可以是内连接查询,也可以是外连接查询</code></p>
<h6 id="联合查询-union-union-all"><a href="#联合查询-union-union-all" class="headerlink" title="联合查询(union,union all)"></a>联合查询(union,union all)</h6><blockquote>
<p>对于union 查询,就是把多次查询的结果合并起来,形成一个新的查询结果</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表A ...</span><br><span class="line">UNION [ALL]</span><br><span class="line">SELECT 字段列表 FROM 表B ...;</span><br></pre></td></tr></table></figure>

<p><code>对于联合查询的多张表的列数必须保持一致,字段类型也需要保持一致</code></p>
<p><code>union all 会将全部都数据直接合并在一起,union会对合并之后的数据去重</code></p>
<h5 id="子链接"><a href="#子链接" class="headerlink" title="子链接"></a>子链接</h5><ul>
<li><p>概念:SQL语句中嵌套SELECT语句,称为嵌套查询,又称子查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM t1 WHERE column1 =(SELECT  column1 FROM t2);</span><br></pre></td></tr></table></figure>

<p><code>子查询外部的语句可是  INSERT /UPDATE/DELETE/SELECT 的任何一个</code></p>
</li>
<li><p>根据子查询结果不同,分为:</p>
<ul>
<li>标量子查询(子查询结果为单个值)</li>
<li>列子查询(子查询结果为一列)</li>
<li>行子查询(子查询结果为一行)</li>
<li>表子查询(子查询结果为多行多列)</li>
</ul>
</li>
<li><p>根据子查询位置,分为:WHERE之后,FROM之后,SELECT之后</p>
</li>
<li><p>标量查询</p>
<blockquote>
<p>子查询返回到结果是单个值(数字、字符串、日期等),最简单的形式,这种子查询称为标量子查询</p>
<p>常用的操作符: &#x3D;  &lt;&gt;  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#查询&quot;销售部&quot;的所有员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#查詢指定入职日期之后入职的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entrydate <span class="operator">&gt;</span>(<span class="keyword">select</span> entrydate <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;东方白&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>列子查询</p>
<blockquote>
<p>子查询返回的结果是一列(可以是多行),这种子查询称为列子查询</p>
<p>常用的操作符: IN 、NOT IN 、ANY 、SOME 、ALL</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>在指定的集合范围之内,多选一</td>
</tr>
<tr>
<td>NOT IN</td>
<td>不在指定的集合范围之内</td>
</tr>
<tr>
<td>ANY</td>
<td>子查询返回列表中,有任意一个满足即可</td>
</tr>
<tr>
<td>SOME</td>
<td>与ANY等同,使用SOME的地方都可以使用ANY</td>
</tr>
<tr>
<td>ALL</td>
<td>子查询返回列表的所有值都必须满足</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#查询<span class="string">&#x27;销售部&#x27;</span>和<span class="string">&#x27;市场部&#x27;</span>的所有员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;销售部&#x27;</span> <span class="keyword">or</span> name<span class="operator">=</span><span class="string">&#x27;市场部&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#查询 财务部 所有人员工资都高的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">all</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27;财务部&#x27;</span>));</span><br><span class="line"></span><br><span class="line">#查询 比 研发部其中任意一人工资高的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span><span class="keyword">any</span>(<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>行子查询</p>
<blockquote>
<p>子查询返回到结果是一行(可以是多列),这种子查询称为行子查询</p>
<p>常用的操作符: &#x3D; 、&lt;&gt;、IN、NOT IN</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查询与 张无忌的薪资 与 直属领导相同 的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary,managerid)<span class="operator">=</span>(<span class="keyword">select</span> salary,managerid <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27; 张无忌&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>表子查询</p>
<blockquote>
<p>子查询返回的结果是多行多列,这种子查询称为表子查询</p>
<p>常用操作符: IN</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#查询 与 &quot;鹿杖客&quot; &quot;宋远桥&quot; 的职位和薪资相同的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (job , salary) <span class="keyword">in</span> (<span class="keyword">select</span> job,salary <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;鹿杖客&#x27;</span> <span class="keyword">or</span> name<span class="operator">=</span><span class="string">&#x27;宋远桥&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#查询入职日期是 &quot;2006-01-01&quot;之后的员工信息,及其部门信息</span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>,d.<span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entrydate<span class="operator">&gt;</span> <span class="string">&#x27;2006-01-01&#x27;</span>) e <span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id <span class="operator">=</span>d.id;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="多表查询案例"><a href="#多表查询案例" class="headerlink" title="多表查询案例"></a>多表查询案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> salgrade(</span><br><span class="line">    grade <span class="type">int</span>,</span><br><span class="line">    losal <span class="type">int</span>,</span><br><span class="line">    hisal <span class="type">int</span></span><br><span class="line">) comment <span class="string">&#x27;薪资等级表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">0</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">2</span>,<span class="number">3001</span>,<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">3</span>,<span class="number">5001</span>,<span class="number">8000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">4</span>,<span class="number">8001</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">5</span>,<span class="number">10001</span>,<span class="number">15000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">6</span>,<span class="number">15001</span>,<span class="number">20000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">7</span>,<span class="number">20001</span>,<span class="number">25000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">8</span>,<span class="number">25001</span>,<span class="number">30000</span>);</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的姓名、年龄、职位、部门信息 （隐式内连接）</span><br><span class="line"><span class="comment">-- 表: emp , dept</span></span><br><span class="line"><span class="comment">-- 连接条件: emp.dept_id = dept.id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.name , e.age , e.job , d.name <span class="keyword">from</span> emp e , dept d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"># 查询年龄小于<span class="number">30</span>岁的员工的姓名、年龄、职位、部门信息（显式内连接）</span><br><span class="line"><span class="comment">-- 表: emp , dept</span></span><br><span class="line"><span class="comment">-- 连接条件: emp.dept_id = dept.id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.name , e.age,e.job.,d.name  <span class="keyword">from</span> emp e <span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">dept d <span class="keyword">on</span> e.dept_id<span class="operator">=</span>d.id <span class="keyword">where</span> e.age<span class="operator">&lt;</span><span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查询拥有员工的部门ID、部门名称</span><br><span class="line"><span class="comment">-- 表: emp , dept</span></span><br><span class="line"><span class="comment">-- 连接条件: emp.dept_id = dept.id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> d.id ,d.name  <span class="keyword">from</span> emp e, dept d <span class="keyword">where</span> e.dept_id<span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"># 查询所有年龄大于<span class="number">40</span>岁的员工, 及其归属的部门名称; 如果员工没有分配部门, 也需要展示出来</span><br><span class="line"><span class="comment">-- 表: emp , dept</span></span><br><span class="line"><span class="comment">-- 连接条件: emp.dept_id = dept.id</span></span><br><span class="line"><span class="comment">-- 外连接</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>,d.name <span class="keyword">from</span> emp e <span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id<span class="operator">=</span>d.id <span class="keyword">where</span> e.age<span class="operator">&gt;</span><span class="number">40</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查询所有员工的工资等级</span><br><span class="line"><span class="comment">-- 表: emp , salgrade</span></span><br><span class="line"><span class="comment">-- 连接条件 : emp.salary &gt;= salgrade.losal and emp.salary &lt;= salgrade.hisal</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>,s.grade,s.losal,s.hisal <span class="keyword">from</span> emp e,salgrade s <span class="keyword">where</span> emp.salary <span class="operator">&gt;=</span> salgrade.losal <span class="keyword">and</span> emp.salary <span class="operator">&lt;=</span> salgrade.hisal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>,s.grade,s.losal,s.hisal <span class="keyword">from</span> emp e,salgrade s <span class="keyword">where</span> emp.salary <span class="keyword">between</span> salgrade.losal <span class="keyword">and</span> salgrade.hisal;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查询 &quot;研发部&quot; 所有员工的信息及 工资等级</span><br><span class="line"><span class="comment">-- 表: emp , salgrade , dept</span></span><br><span class="line"><span class="comment">-- 连接条件 : emp.salary between salgrade.losal and salgrade.hisal , emp.dept_id = dept.id</span></span><br><span class="line"><span class="comment">-- 查询条件 : dept.name = &#x27;研发部</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e<span class="operator">*</span>,s.grade <span class="keyword">from</span> emp e, dept d ,salgrade s <span class="keyword">where</span> e.dept_id<span class="operator">=</span>d.id <span class="keyword">and</span> (e.salary <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal) <span class="keyword">and</span> d.name<span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询 &quot;研发部&quot; 员工的平均工资</span><br><span class="line"><span class="comment">-- 表: emp , dept</span></span><br><span class="line"><span class="comment">-- 连接条件 :  emp.dept_id = dept.id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(e.salary) <span class="keyword">from</span> emp e, dept d <span class="keyword">where</span> e.dept_id <span class="operator">=</span>d.id <span class="keyword">and</span> d.name<span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#查询工资比 <span class="string">&#x27;灭绝&#x27;</span>高的员工信息</span><br><span class="line"><span class="comment">--a  查询&#x27;灭绝&#x27; 的薪资</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;灭绝&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--b  查询比他工资高的员工信息</span></span><br><span class="line"></span><br><span class="line">selct <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;灭绝&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#查询比平均薪资高的员工信息</span><br><span class="line"><span class="comment">--a 查询员工的平均薪资</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span> emp ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--b 查询比平均薪资高的员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary<span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line">#查询低于本部门平均工资的员工信息</span><br><span class="line"><span class="comment">-- a 查询指定部门平均薪资</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(e1.salary) <span class="keyword">from</span> emp e1 <span class="keyword">where</span> e1.dept_id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(e1.salary) <span class="keyword">from</span> emp e1 <span class="keyword">where</span> e1.dept_id<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b 查询低于本部门平均工资的员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp e2 <span class="keyword">where</span> e2.salary <span class="operator">&lt;</span>(<span class="keyword">select</span> <span class="built_in">avg</span>(e1.salary) <span class="keyword">from</span> emp e1 <span class="keyword">where</span> e1.dept_id<span class="operator">=</span>e2.dept_id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查询所有部门信息 ,并统计部门的员工人数</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> d.id ,d.name, (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp e <span class="keyword">where</span> e.dept_id <span class="operator">=</span>d.id)<span class="string">&#x27;人数&#x27;</span> <span class="keyword">from</span> dept d;</span><br><span class="line"></span><br><span class="line">#查询所有学生的选课情况,展示出学生名称,学号,课程名</span><br><span class="line"><span class="comment">--表:student course student_course</span></span><br><span class="line"><span class="comment">--链接条件: studetn.id= student_course.studentid , course.id =student_course.courseid</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.name , s.no , c.name <span class="keyword">from</span> student s,student_course sc ,course c <span class="keyword">where</span> s.id<span class="operator">=</span>sc.studentid <span class="keyword">and</span> sc.courseid <span class="operator">=</span>c.id;</span><br></pre></td></tr></table></figure>



<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><h4 id="事务简介"><a href="#事务简介" class="headerlink" title="事务简介"></a>事务简介</h4><blockquote>
<p>事务 是一组操作的集合,它是一个不可分割的工作单位,事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求,即这些操作要么同时成功,要么同时失败</p>
</blockquote>
<h4 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#创建表</span><br><span class="line">create table account &#123;</span><br><span class="line">	id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">	name varchar(10)comment &#x27;姓名&#x27;,</span><br><span class="line">	money int comment &#x27;余额&#x27;,</span><br><span class="line">&#125; comment &#x27;账户表&#x27;;</span><br><span class="line">insert into account(id,name,money) VALUES (null,&#x27;张三&#x27;,2000),(null,&#x27;李四&#x27;,2000);</span><br><span class="line">#恢复数据</span><br><span class="line">update account set money=2000 where name=&#x27;张三&#x27; or name =&#x27;李四&#x27;;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#手动提交</span><br><span class="line">select @@autocommit;</span><br><span class="line">set @@autocommit =1;</span><br><span class="line">#转账操作(张三给李四转账1000)</span><br><span class="line">--1. 查询张三账户余额</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line">--2. 将张三账户余额-1000</span><br><span class="line">update account set money=money-1000 where name= &#x27;张三&#x27;;</span><br><span class="line"></span><br><span class="line">程序抛出异常</span><br><span class="line">--3. 将李四账户余额+1000</span><br><span class="line">update account set money=money+1000 where name= &#x27;李四&#x27;;</span><br><span class="line"></span><br><span class="line">#提交事务(事务正常)</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">#回滚事务(事务出现异常)</span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line">#方式二</span><br><span class="line">#转账操作(张三给李四转账1000)</span><br><span class="line">start transaction;</span><br><span class="line"></span><br><span class="line">--1. 查询张三账户余额</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line">--2. 将张三账户余额-1000</span><br><span class="line">update account set money=money-1000 where name= &#x27;张三&#x27;;</span><br><span class="line"></span><br><span class="line">程序抛出异常</span><br><span class="line">--3. 将李四账户余额+1000</span><br><span class="line">update account set money=money+1000 where name= &#x27;李四&#x27;;</span><br><span class="line"></span><br><span class="line">#提交事务(事务正常)</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">#回滚事务(事务出现异常)</span><br><span class="line">rollback;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>查看&#x2F;设置事务提交方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@autocommit;</span><br><span class="line">SET @@autocommit=0; #手动提交</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>
</li>
<li><p>回滚事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">START TRANSACTION 或 BEGIN;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="事务四大特性"><a href="#事务四大特性" class="headerlink" title="事务四大特性"></a>事务四大特性</h4><ul>
<li>原子性(Atomicity):事务是不可分割单最小操作单元,要么全部成功,要么全部失败</li>
<li>一致性(Consistency):事务完成时,必须使所有的数据都保持一致状态</li>
<li>隔离性(Isolation):数据库系统提供的隔离机制,保证事务在不受外部并发操作影响的独立环境下运行</li>
<li>持久性(Durability):事务一旦提交或回滚,它对数据库中的数据的改变就是永久的</li>
</ul>
<h4 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h4><table>
<thead>
<tr>
<th>问题</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>脏读</td>
<td>一个事务</td>
</tr>
<tr>
<td>不可重复读</td>
<td>一个事务先后读取同一条记录,但两次读取的数据不同,称之为不可重复读</td>
</tr>
<tr>
<td>幻读</td>
<td>一个事务按照条件查询数据时,没有对应的数据行,但是在插入数据时,又发现这行数据已经存在,好像出现了”幻影”</td>
</tr>
</tbody></table>
<h4 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h4><table>
<thead>
<tr>
<th align="center">隔离级别</th>
<th align="center">脏读</th>
<th align="center">不可以重复读</th>
<th align="center">幻读</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Read uncommit</td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">✓</td>
</tr>
<tr>
<td align="center">Read committed</td>
<td align="center">×</td>
<td align="center">✓</td>
<td align="center">✓</td>
</tr>
<tr>
<td align="center">Repeatable Read(默认)</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">✓</td>
</tr>
<tr>
<td align="center">Serializable(串行化)</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--查看事务隔离级别</span><br><span class="line">SELECT @@TRANSACTION_ISOLATION;</span><br><span class="line">--设置事务隔离级别</span><br><span class="line">SET [SESSION|GLOBAL] TRANSACTION ISOLATION LEVEL [READ UNCOMMITTED | READ COMMITTED |REPEATABLE READ | SERIALIZABLE]</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">#脏读(用cmd开启两个<span class="keyword">sql</span>窗口A,B,并使用同一个数据库)</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> <span class="keyword">read</span> <span class="keyword">uncommitted</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> account;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> <span class="type">money</span>=<span class="type">money</span><span class="number">-1000</span> <span class="keyword">where</span> <span class="type">name</span>=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line">#解决脏读</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> <span class="keyword">read</span> <span class="keyword">committed</span>;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> <span class="type">money</span>=<span class="type">money</span><span class="number">-1000</span> <span class="keyword">where</span> <span class="type">name</span>=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#不可重复读</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> <span class="type">money</span>=<span class="type">money</span>+<span class="number">1000</span> <span class="keyword">where</span> <span class="type">name</span>=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#解决不可重复读</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> <span class="keyword">repeatable</span> <span class="keyword">read</span>;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> <span class="type">money</span>=<span class="type">money</span>+<span class="number">1000</span> <span class="keyword">where</span> <span class="type">name</span>=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#幻读</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account <span class="keyword">where</span> id=<span class="number">3</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account(id,<span class="type">name</span>,<span class="type">money</span>) <span class="keyword">value</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account(id,<span class="type">name</span>,<span class="type">money</span>) <span class="keyword">value</span>(<span class="number">3</span>,<span class="string">&#x27;大刀王五&#x27;</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> account <span class="keyword">where</span> id=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line">#解决幻读</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> <span class="keyword">serializable</span>;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> account <span class="keyword">where</span> id=<span class="number">4</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account(id,<span class="type">name</span>,<span class="type">money</span>) <span class="keyword">value</span>(<span class="number">4</span>,<span class="string">&#x27;王五2&#x27;</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="comment">--A</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account(id,<span class="type">name</span>,<span class="type">money</span>) <span class="keyword">value</span>(<span class="number">4</span>,<span class="string">&#x27;大刀王五&#x27;</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">--B</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<p><code>注意:事务隔离级别越高,数据越安全,但性能越低</code></p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>小小怪将军
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/2023/10/24/MySQL/" title="MySQL">http://example.com/2023/10/24/MySQL/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/10/19/Git%E5%91%BD%E4%BB%A4/" rel="prev" title="Git命令">
                  <i class="fa fa-angle-left"></i> Git命令
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/11/11/Node/" rel="next" title="">
                   <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">小小怪将军</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("10/19/2023 10:00:00"); //此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/Tarry0520" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





  


</body>
</html>
